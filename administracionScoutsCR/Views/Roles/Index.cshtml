@model IEnumerable<administracionScoutsCR.Models.Role>

@{
	ViewData["Title"] = "Roles";
}

<body>
	<div class="content">
		<div class="page-header">
			<div class="add-item d-flex">
				<div class="page-title">
					<h4>Roles</h4>
					<h6>Lista de Roles Registrados</h6>
				</div>
			</div>
			<ul class="table-top-head">
				<li>
					<a data-bs-toggle="tooltip" data-bs-placement="top" title="PDF">
						<img src="assets/img/icons/pdf.svg" alt="PDF">
					</a>
				</li>
				<li>
					<a data-bs-toggle="tooltip" data-bs-placement="top" title="Excel">
						<img src="assets/img/icons/excel.svg" alt="Excel">
					</a>
				</li>
				<li>
					<a data-bs-toggle="tooltip" data-bs-placement="top" title="Imprimir">
						<i data-feather="printer"></i>
					</a>
				</li>
				<li>
					<a data-bs-toggle="tooltip" data-bs-placement="top" title="Actualizar">
						<i data-feather="rotate-ccw"></i>
					</a>
				</li>
				<div class="page-btn">
					<a class="btn btn-added" asp-action="Create">
						<i data-feather="plus-circle" class="me-2"></i>Agregar Nuevo Rol
					</a>
				</div>
			</ul>
		</div>

		<!-- Tabla de Roles -->
		<div class="card table-list-card">
			<div class="card-body pb-0">
				<div class="table-responsive">
					<table class="table table-striped" id="rolesTable">
						<thead>
							<tr>
								<th>Nombre</th>
								<th>Acciones</th>
							</tr>
						</thead>
						<tbody>
							@foreach (var item in Model)
							{
								<tr>
									<td>@item.Nombre</td>
									<td class="action-table-data text-end">
										<div class="edit-delete-action">
											<a class="me-2 edit-icon p-2" asp-action="Details" asp-route-id="@item.Id">
												<i data-feather="eye" class="feather-eye"></i>
											</a>
											<a class="me-2 p-2" asp-action="Edit" asp-route-id="@item.Id">
												<i data-feather="edit" class="feather-edit"></i>
											</a>
											<a class="confirm-text p-2" href="javascript:void(0);" onclick="confirmarBorrado('@item.Id')">
												<i data-feather="trash-2" class="feather-trash-2"></i>
											</a>
										</div>
									</td>

								</tr>
							}
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</body>
@section Scripts {
	<script>
		function confirmarBorrado(id) {
			Swal.fire({
				title: '¿Estás seguro?',
				text: "¡No podrás revertir esto!",
				icon: 'warning',
				showCancelButton: true,
				confirmButtonColor: '#ff9f43',
				cancelButtonColor: '#f63c3c',
				confirmButtonText: 'Sí, eliminarlo',
				cancelButtonText: 'Cancelar'
			}).then((result) => {
				if (result.isConfirmed) {
					fetch(`/Roles/DeleteConfirmed/${id}`, {
						method: 'POST',
						headers: {
							'RequestVerificationToken': $('input[name="__RequestVerificationToken"]').val()
						}
					})
						.then(response => {
							if (response.ok) {
								Swal.fire('Eliminado', 'El rol fue eliminado.', 'success').then(() => {
									location.reload();
								});
							} else {
								Swal.fire('Error', 'No se pudo eliminar el rol.', 'error');
							}
						});
				}
			});
		}
	</script>
}
